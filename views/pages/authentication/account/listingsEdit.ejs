<% layout('layouts/boilerplate')%>
<h1 class="text-center mt-4">Edit Listing</h1>
<div class="container d-flex justify-content-center" >
    <form style="width: 500px" action="/marketplace/listings/<%=listing._id%>/edit?_method=PUT" method="POST" class="validate-form" enctype="multipart/form-data" novalidate>
        <div class="form-outline mb-4">
            <label class="form-label" for="name">Item Name</label>
            <input type="text" id="name" name="marketplace[name]" class="form-control" value="<%=listing.name%>" required />
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="subCategory">Category</label>
            <input type="text" id="subCategory" name="marketplace[subCategory]" class="form-control" value="<%=listing.subCategory%>" required/>
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="condition">Condition</label>
            <input type="text" id="condition" name="marketplace[condition]" class="form-control" value="<%=listing.condition%>" required/>
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="size">Size</label>
            <input type="text" id="size" name="marketplace[size]" class="form-control" value="<%=listing.size%>" required/>
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="description">Description</label>
            <textarea type="text" id="description" name="marketplace[description]" class="form-control"  required></textarea>
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="image">Image</label>
            <input type="file" id="image" name="marketplace[marketplaceImage]"  class="form-control"  multiple <%=listing.marketplaceImage[0].length <=1 ? required : ''  %> />
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="price">Price</label>
            <input type="text" id="price" name="marketplace[price]" class="form-control" value="<%=listing.price%>" required/>
        </div>
        <div class="mb-4 ">
            
            <% listing.marketplaceImage.forEach(function(img, i) {%>
                <img src="<%= img.thumbnail %>" class="img-thumbnail">
                <div class="form-check-inline">
                   <input type="checkbox"  id="image-<%=i%>" name="deleteImages[]" value="<%=img.fileName%>">
                </div>
                <label for="image-<%=i%>">Delete?</label>
            <%}); %>
        </div>
        <button class="btn btn-success">Save</button>
    </form>
</div>


